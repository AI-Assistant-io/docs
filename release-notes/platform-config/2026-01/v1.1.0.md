---
title: "v1.1.0"
date: 2026-01-22
---

# Release 1.1.0 - Local Backend & Dev Mode

**Branch:** main
**Date:** 2026-01-22
**Author:** Development Team

---

## Summary

Added local backend service for Cosmos DB integration and dev mode authentication bypass for local development.

---

## Changes

### Bug Fixes

1. **Race Condition in fetchDocument** - `src/App.tsx:211-230`
   - Combined two separate `setState` calls into one to prevent stale state reads
   - Auto-selection of first runner now uses fresh state from the same update

2. **Type Checking Improvements** - `src/App.tsx:220-225`
   - Added `!Array.isArray()` checks to prevent arrays passing object type checks

### New Features

1. **Dev Mode Authentication Bypass** - `src/App.tsx:128`
   - Added `REACT_APP_DEV_MODE` environment variable
   - When `true`, bypasses Auth0 authentication for local development
   - Grants full access and write permissions in dev mode

2. **Configurable Document ID** - `src/App.tsx:149`
   - Document ID now read from `REACT_APP_DEFAULT_DOC_ID` environment variable
   - Falls back to hardcoded default if not set

3. **Local Backend Service** - `backend/`
   - New Express server that queries Cosmos DB directly
   - Endpoints:
     - `GET /api/GetDocumentById?id=<id>&recordType=<type>`
     - `PUT /api/UpdateDocumentById?id=<id>&recordType=<type>`
     - `GET /api/health`
   - Change detection before upsert (skips update if no changes)
   - Environment-specific configuration (preprod/prod)

4. **Concurrent Dev Command** - `package.json`
   - Added `npm run dev` to start both frontend and backend
   - Added `npm run dev:prod` for production Cosmos connection

### UI Fixes

1. **Footer Overlap Fix** - `src/components/Sidebar.tsx:295-298`
   - Added bottom padding to Save button section to clear fixed footer

---

## Configuration

### New Environment Variables

#### Frontend (`.env.local`)
```env
PORT=3100
REACT_APP_DEV_MODE=true
REACT_APP_DEFAULT_DOC_ID=01931c2e-06c9-7007-a3dd-e55dac63a4cd
REACT_APP_AUTOMATION_API_URL=http://localhost:3101
```

#### Backend (`.env.preprod` / `.env.prod`)
```env
COSMOS_ENDPOINT=https://your-cosmos.documents.azure.com:443/
COSMOS_KEY=your-key
COSMOS_DATABASE=aiadatabase
COSMOS_CONTAINER=configurations
PORT=3101
```

---

## How to Run

```bash
# Install dependencies
npm install
cd backend && npm install && cd ..

# Start both frontend (3100) + backend (3101)
npm run dev          # Uses preprod Cosmos
npm run dev:prod     # Uses prod Cosmos
```

---

## Files Changed

- `src/App.tsx` - Bug fixes, dev mode, configurable doc ID
- `src/components/Sidebar.tsx` - Footer overlap fix
- `package.json` - Added concurrently, dev scripts
- `.env.local` - New env vars
- `.gitignore` - Ignore backend env files
- `backend/` - New folder
  - `package.json`
  - `server.js`
  - `.env.preprod`
  - `.env.prod`

---

## Breaking Changes

None

---

## Migration Notes

1. Run `npm install` to get new `concurrently` dependency
2. Run `cd backend && npm install` to install backend dependencies
3. Configure `backend/.env.preprod` with your Cosmos DB credentials
4. Set `REACT_APP_DEV_MODE=true` in `.env.local` for local development
